<?
  var $reactions = { '😍': {count:0, selected:''}, '🙂': {count:0, selected:''}, '😕': {count:0, selected:''}, '😡': {count:0, selected:''}}
  for (var i = 0; i < reactions.length; i++) {
    var reaction = reactions[i]
    $reactions[reaction.emoji].count ++
    if (user) {
      if (reaction.user.toString() === user.id) $reactions[reaction.emoji].selected = 'selected'
    }

  }
?>

<!-- TODO: make reactions use ajax -->

<div class="mt-3 d-flex">
    <div class="rating rounded linkable <?= $reactions['😍'].selected ?>"
         url="/react/<?= type ?>"
         method="post"
         params='{"value": "😍", "id": "<?= id ?>"}'
         redirect>
      <?- tw('😍') ?>
      <div class="text-muted small ml-1"><?= $reactions['😍'].count ?></div>
    </div>
    <div class="ml-1 rating rounded linkable <?= $reactions['🙂'].selected ?>"
         url="/react/<?= type ?>"
         method="post"
         params='{"value": "🙂", "id": "<?= id ?>"}'
         redirect>
      <?- tw('🙂') ?>
      <div class="text-muted small ml-1"><?= $reactions['🙂'].count ?></div>
    </div>
    <div class="ml-1 rating rounded linkable <?= $reactions['😕'].selected ?>"
         url="/react/<?= type ?>"
         method="post"
         params='{"value": "😕", "id": "<?= id ?>"}'
         redirect>
      <?- tw('😕') ?>
      <div class="text-muted small ml-1"><?= $reactions['😕'].count ?></div>
    </div>
    <div class="ml-1 rating rounded linkable <?= $reactions['😡'].selected ?>"
         url="/react/<?= type ?>"
         method="post"
         params='{"value": "😡", "id": "<?= id ?>"}'
         redirect>
      <?- tw('😡') ?>
      <div class="text-muted small ml-1"><?= $reactions['😡'].count ?></div>
    </div>
</div>