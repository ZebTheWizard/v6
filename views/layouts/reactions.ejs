<?
  var $reactions = { 'ğŸ˜': {count:0, selected:''}, 'ğŸ™‚': {count:0, selected:''}, 'ğŸ˜•': {count:0, selected:''}, 'ğŸ˜¡': {count:0, selected:''}}
  for (var i = 0; i < reactions.length; i++) {
    var reaction = reactions[i]
    $reactions[reaction.emoji].count ++
    if (user) {
      if (reaction.user.toString() === user.id) $reactions[reaction.emoji].selected = 'selected'
    }

  }
?>

<!-- TODO: make reactions use ajax -->

<div class="mt-3 d-flex">
    <div class="rating rounded linkable <?= $reactions['ğŸ˜'].selected ?>"
         url="/react/<?= type ?>"
         method="post"
         params='{"value": "ğŸ˜", "id": "<?= id ?>"}'
         redirect>
      <?- tw('ğŸ˜') ?>
      <div class="text-muted small ml-1"><?= $reactions['ğŸ˜'].count ?></div>
    </div>
    <div class="ml-1 rating rounded linkable <?= $reactions['ğŸ™‚'].selected ?>"
         url="/react/<?= type ?>"
         method="post"
         params='{"value": "ğŸ™‚", "id": "<?= id ?>"}'
         redirect>
      <?- tw('ğŸ™‚') ?>
      <div class="text-muted small ml-1"><?= $reactions['ğŸ™‚'].count ?></div>
    </div>
    <div class="ml-1 rating rounded linkable <?= $reactions['ğŸ˜•'].selected ?>"
         url="/react/<?= type ?>"
         method="post"
         params='{"value": "ğŸ˜•", "id": "<?= id ?>"}'
         redirect>
      <?- tw('ğŸ˜•') ?>
      <div class="text-muted small ml-1"><?= $reactions['ğŸ˜•'].count ?></div>
    </div>
    <div class="ml-1 rating rounded linkable <?= $reactions['ğŸ˜¡'].selected ?>"
         url="/react/<?= type ?>"
         method="post"
         params='{"value": "ğŸ˜¡", "id": "<?= id ?>"}'
         redirect>
      <?- tw('ğŸ˜¡') ?>
      <div class="text-muted small ml-1"><?= $reactions['ğŸ˜¡'].count ?></div>
    </div>
</div>