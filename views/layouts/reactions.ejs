<?
  var $reactions = { 'ğŸ˜': {count:0, selected:''}, 'ğŸ™‚': {count:0, selected:''}, 'ğŸ˜•': {count:0, selected:''}, 'ğŸ˜¡': {count:0, selected:''}}
  for (var i = 0; i < reactions.length; i++) {
    var reaction = reactions[i]
    $reactions[reaction.emoji].count ++
    if (user) {
      if (reaction.user.toString() === user.id) $reactions[reaction.emoji].selected = 'selected'
    }

  }
?>

<!-- TODO: make reactions use ajax -->

<div class="d-flex">
    <div class="rating rounded <?= $reactions['ğŸ˜'].selected ?>"
         data-url="/react/<?= type ?>"
         data-rating="ğŸ˜"
         data-id="<?= id ?>">
      <?- tw('ğŸ˜') ?>
      <div class="text-muted small ml-1 rating-heart"><?= $reactions['ğŸ˜'].count ?></div>
    </div>
    <div class="ml-1 rating rounded <?= $reactions['ğŸ™‚'].selected ?>"
         data-url="/react/<?= type ?>"
         data-rating="ğŸ™‚"
         data-id="<?= id ?>">
      <?- tw('ğŸ™‚') ?>
      <div class="text-muted small ml-1 rating-smile"><?= $reactions['ğŸ™‚'].count ?></div>
    </div>
    <div class="ml-1 rating rounded <?= $reactions['ğŸ˜•'].selected ?>"
         data-url="/react/<?= type ?>"
         data-rating="ğŸ˜•"
         data-id="<?= id ?>">
      <?- tw('ğŸ˜•') ?>
      <div class="text-muted small ml-1 rating-frown"><?= $reactions['ğŸ˜•'].count ?></div>
    </div>
    <div class="ml-1 rating rounded <?= $reactions['ğŸ˜¡'].selected ?>"
         data-url="/react/<?= type ?>"
         data-rating="ğŸ˜¡"
         data-id="<?= id ?>">
      <?- tw('ğŸ˜¡') ?>
      <div class="text-muted small ml-1 rating-angry"><?= $reactions['ğŸ˜¡'].count ?></div>
    </div>
</div>
